(this["webpackJsonpdata-exchange-react-app"]=this["webpackJsonpdata-exchange-react-app"]||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l);a(17),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(18);var s=a(1),o=a(2),i=a(4),u=a(3),m=a(5),p=a(7),b=a.n(p),d=a(8),h=a(6),f=(a(9),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tableName:"",attributes:[{name:"",type:"",maxSize:""}]},a.createTableURL="https://data-exchange-api.herokuapp.com/api/table",a.resetState=function(){a.setState({tableName:"",attributes:[{name:"",type:"",maxSize:""}]})},a.handleCreate=function(){var e=a.state.tableName,t=a.state;a.resetState(),a.postData(a.createTableURL,t).then((function(t){a.props.parentSetLastCreatedTable(e),a.props.parentSetClickedTable(e),a.props.parentSetClickedApp("ViewDataApp")}))},a.handleChange=function(e){return function(t){var n=t.target,r=n.name,l=n.value,c=Object(h.a)(a.state.attributes);c[e][r]=l,a.setState({attributes:c})}},a.handleChangeOnTableName=function(e){var t=e.target.value;a.setState({tableName:t})},a.handleAddRow=function(){a.setState({attributes:[].concat(Object(h.a)(a.state.attributes),[{name:"",type:"",maxSize:""}])})},a.handleRemoveRow=function(){a.setState({attributes:a.state.attributes.slice(0,-1)})},a.handleRemoveSpecificRow=function(e){return function(){var t=Object(h.a)(a.state.attributes);t.splice(e,1),a.setState({attributes:t})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"postData",value:function(){var e=Object(d.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=3,fetch(t,n);case 3:return r=e.sent,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container col-8 float-center mt-4"},r.a.createElement("div",{className:"form-group row m-3"},r.a.createElement("span",{className:"h3"},"Table Name:"),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("input",{id:"tableName01",type:"text",name:"tableName",value:this.state.tableName,onChange:this.handleChangeOnTableName,className:"form-control"}))),r.a.createElement("div",{class:"table-wrap pr-2 mb-2"},r.a.createElement("table",{className:"table table-bordered table-striped table-hover m-2",id:"tab_logic"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"}," Column Name "),r.a.createElement("th",{className:"text-center"}," Column Type "),r.a.createElement("th",{className:"text-center"}," Max Size"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.attributes.map((function(t,a){return r.a.createElement("tr",{id:"addr0",key:a},r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"name",value:e.state.attributes[a].name,onChange:e.handleChange(a),className:"form-control"})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"type",value:e.state.attributes[a].type,onChange:e.handleChange(a),className:"form-control"})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"maxSize",value:e.state.attributes[a].maxSize,onChange:e.handleChange(a),className:"form-control"})),r.a.createElement("td",{className:"text-center"},r.a.createElement("button",{className:"btn btn-outline-danger btn-sm font-weight-bold",onClick:e.handleRemoveSpecificRow(a)},"X")))}))))),r.a.createElement("div",{className:"float-left"},r.a.createElement("button",{onClick:this.handleAddRow,className:"btn btn-outline-primary m-2"},"Add"),r.a.createElement("button",{onClick:this.handleRemoveRow,className:"btn btn-outline-danger m-2"},"Remove")),r.a.createElement("button",{onClick:this.handleCreate,className:"btn btn-outline-success m-2 float-right font-weight-bold"},"Create Table"))}}]),t}(n.Component)),v=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(f,{parentSetClickedApp:this.props.parentSetClickedApp,parentSetClickedTable:this.props.parentSetClickedTable,parentSetLastCreatedTable:this.props.parentSetLastCreatedTable})}}]),t}(n.Component),g=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light mb-2"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01"},r.a.createElement("a",{className:"navbar-brand",href:"#Top"},r.a.createElement("span",{className:"text-primary ml-3"},"DATA"),"Exchange"),r.a.createElement("div",{className:"navbar-nav mr-auto mt-2 mt-lg-0"}),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search"}),r.a.createElement("button",{className:"btn btn-outline-primary my-2 my-sm-0",type:"submit",disabled:!0},"Search"))))}}]),t}(n.Component),N=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"page-footer font-small fixed-bottom"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2020 Copyright:",r.a.createElement("a",{href:"https://mff.cuni.cz/"},"Guatemala beans")))}}]),t}(n.Component),E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={tableName:a.props.tableName,tableAttributes:[],data:[],errors:[]},a.tableDataURL="https://data-exchange-api.herokuapp.com/api/table/data/",a.tableAttributesURL="https://data-exchange-api.herokuapp.com/api/table/columns/",a.parseIncomingData=function(e){for(var t=Object.keys(e),a=Object(h.a)(e[t[0]]).length,n=[],r=function(a){var r={};t.forEach((function(t){r[t]=e[t][a]})),n.push(r)},l=0;l<a;l++)r(l);return n},a.renderTableDataRow=function(e){return a.state.tableAttributes.map((function(t){return r.a.createElement("td",null,r.a.createElement("span",{className:""},a.state.data[e][t]))}))},a.renderTableData=function(){return r.a.createElement("tbody",null,a.state.data.map((function(e,t){return r.a.createElement("tr",{id:"addr0",key:t},a.renderTableDataRow(t))})))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log("component ",this.state.tableName," mounted!"),this.setState({tableName:this.props.tableName}),this.fetchAndUpdateTableAttributes(),this.fetchAndUpdateTableData()}},{key:"componentDidUpdate",value:function(e){this.props.tableName!==e.tableName&&(console.log("props compare on update: ",this.props.tableName,e.tableName),this.fetchAndUpdateTableAttributes(),this.fetchAndUpdateTableData())}},{key:"fetchAndUpdateTableAttributes",value:function(){var e=this;this.state.tableName;fetch(this.tableAttributesURL+this.state.tableName,{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e.setState({tableAttributes:t})})).catch((function(t){console.log("when fetching attributes",t);var a=e.state.errors;e.setState({tableAttributes:[],data:[],errors:[].concat(Object(h.a)(a),[t])})}))}},{key:"fetchAndUpdateTableData",value:function(){var e=this;this.state.tableName;fetch(this.tableDataURL+this.state.tableName,{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e.setState({data:e.parseIncomingData(t)})})).catch((function(t){console.log("when fetching attributes",t);var a=e.state.errors;e.setState({tableAttributes:[],data:[],errors:[].concat(Object(h.a)(a),[t])})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container col-8 float-center mt-4"},r.a.createElement("span",{className:"h3 m-3 text-capitalize"},this.props.tableName),r.a.createElement("div",{class:"table-wrap pr-2 mb-2"},r.a.createElement("table",{className:"table table-bordered table-striped table-hover m-2",id:"tab_logic"},r.a.createElement("thead",null,r.a.createElement("tr",null,this.state.tableAttributes.map((function(e){return r.a.createElement("th",{className:"text-capitalize"},e)})))),this.renderTableData())),r.a.createElement("div",{className:"float-right"},r.a.createElement("button",{onClick:function(){return e.props.parentSetClickedApp("AddDataApp")},className:"btn btn-outline-success m-2 font-weight-bold"},"Add Data")))}}]),t}(n.Component);E.getDerivedStateFromProps=function(e,t){return t.tableName=e.tableName,t};var y=E,C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={currentTableName:a.props.tableName},a.renderTableDataContainer=function(){return a.state.currentTableName?r.a.createElement(y,{tableName:a.state.currentTableName,parentSetClickedApp:a.props.parentSetClickedApp}):r.a.createElement("span",null,"No table selected...")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderTableDataContainer())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.currentTableName=e.tableName,t}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={tableName:a.props.tableName,attributes:[],data:[],errors:[]},a.addDataURL="https://data-exchange-api.herokuapp.com/api/table/data/",a.getAttributesURL="https://data-exchange-api.herokuapp.com/api/table/columns/",a.loading=!0,a.resetState=function(){a.setState({data:[]})},a.parseIntoSushisJsonFormat=function(e){if(0==e.length)return[];var t=Object.keys(e[0]);console.log(t);var a={};return t.forEach((function(t){a[t]=[],e.forEach((function(e){a[t].push(e[t])}))})),console.log(a),a},a.handleSubmit=function(){var e=a.parseIntoSushisJsonFormat(a.state.data);a.resetState(),a.postData(a.addDataURL+a.state.tableName,e).then((function(e){console.log(e),a.props.parentSetClickedApp("ViewDataApp")}))},a.handleChange=function(e){return function(t){var n=t.target,r=n.name,l=n.value,c=Object(h.a)(a.state.data);c[e][r]=l,a.setState({data:c})}},a.handleChangeOnTableName=function(e){var t=e.target.value;a.setState({tableName:t})},a.handleAddRow=function(){for(var e={},t=0;t<a.state.attributes.length;t++)e[a.state.attributes[t]]="";a.setState({data:[].concat(Object(h.a)(a.state.data),[e])})},a.handleRemoveRow=function(){a.setState({data:a.state.data.slice(0,-1)})},a.handleRemoveSpecificRow=function(e){return function(){var t=Object(h.a)(a.state.data);t.splice(e,1),a.setState({data:t})}},a.renderInputRow=function(e){return a.state.attributes.map((function(t){return r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:t,value:a.state.data[e][t],onChange:a.handleChange(e),className:"form-control"}))}))},a.renderInputRows=function(){return r.a.createElement("tbody",null,a.state.data.map((function(e,t){return r.a.createElement("tr",{id:"addr0",key:t},a.renderInputRow(t),r.a.createElement("td",{className:"text-center"},r.a.createElement("button",{className:"btn btn-outline-danger btn-sm font-weight-bold",onClick:a.handleRemoveSpecificRow(t)},"X")))})))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"fetchAndUpdateTableAttributes",value:function(){var e=this;this.state.tableName;fetch(this.getAttributesURL+this.state.tableName,{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e.setState({attributes:t})})).catch((function(t){console.log("when fetching attributes",t);var a=e.state.errors;e.setState({attributes:[],data:[],errors:[].concat(Object(h.a)(a),[t])})}))}},{key:"componentDidMount",value:function(){console.log("component mounted"),this.fetchAndUpdateTableAttributes(),this.handleAddRow()}},{key:"postData",value:function(){var e=Object(d.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},console.log(n),e.next=4,fetch(t,n);case 4:return r=e.sent,e.next=7,r;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.errors.length>=1?r.a.createElement(r.a.Fragment,null,this.state.errors.map((function(e){return r.a.createElement("span",null,e)}))):r.a.createElement("div",{className:"container col-8 float-center mt-4"},r.a.createElement("span",{className:"h3 m-3 text-capitalize"},this.props.tableName),r.a.createElement("div",{class:"table-wrap pr-2 mb-2"},r.a.createElement("table",{className:"table table-bordered table-striped table-hover m-2",id:"tab_logic"},r.a.createElement("thead",null,r.a.createElement("tr",null,this.state.attributes.map((function(e){return r.a.createElement("th",{className:"text-center text-capitalize"},e)})),r.a.createElement("th",null))),this.renderInputRows())),r.a.createElement("div",{className:"float-left"},r.a.createElement("button",{onClick:this.handleAddRow,className:"btn btn-outline-primary m-2"},"Add"),r.a.createElement("button",{onClick:this.handleRemoveRow,className:"btn btn-outline-danger m-2"},"Remove")),r.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-outline-success m-2 float-right font-weight-bold"},"Save"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.tableName=e.tableName,t}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tableName:a.props.tableName},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(k,{tableName:this.state.tableName,parentSetClickedApp:this.props.parentSetClickedApp})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.tableName=e.tableName,t}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={tableNames:[],activeTableName:"",lastCreatedTable:a.props.lastCreatedTable,errors:[]},a.getTableNamesURL="https://data-exchange-api.herokuapp.com/api/table/names",a.renderTableContent=function(){return a.state.tableNames.map((function(e){return r.a.createElement("tr",{className:"clickable-row"},r.a.createElement("td",{className:"text-center"},r.a.createElement("button",{className:"button btn-block btn-outline-secondary btn-lg m-1 text-capitalize text-wrap",onClick:function(){a.setState({activeTableName:e}),a.props.parentSetClickedApp("ViewDataApp"),a.props.parentGetClickedTable(e)}},e)))}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchAndUpdateTableNames();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.lastCreatedTable!==e.lastCreatedTable&&(console.log("props compare on update: ",this.props.lastCreatedTable,e.lastCreatedTable),this.fetchAndUpdateTableNames())}},{key:"isValidResponse",value:function(e){var t=/failureMySql/,a=Object(h.a)(e);return console.log("DEBIL"),console.log(a),console.log(Object.keys(a).length),console.log(a[0]),console.log(t.test(a[0])),1!==Object.keys(a).length||!t.test(a[0])}},{key:"fetchAndUpdateTableNames",value:function(){var e=this;fetch(this.getTableNamesURL,{method:"GET"}).then((function(e){return e.json()})).then((function(t){if(e.isValidResponse(t))e.setState({tableNames:t});else{console.log("Error",t);var a=e.state.errors;e.setState({errors:[].concat(Object(h.a)(a),[t])}),e.setState({tableNames:[]})}}))}},{key:"render",value:function(){var e=this;return this.state.errors.length>=1?r.a.createElement(r.a.Fragment,null,this.state.errors.map((function(e){return r.a.createElement("span",null,e)}))):(console.log("name container: ",this.state.activeTableName),r.a.createElement("div",{className:"container col-2 float-left ml-2"},r.a.createElement("table",{className:""},r.a.createElement("thead",null),r.a.createElement("tbody",null,this.renderTableContent(),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("button",{className:"button btn-block btn-outline-success btn-lg m-1",onClick:function(){return e.props.parentSetClickedApp("CreateTableApp")}},"Add Table")))))))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={currentTableName:void 0,currentApp:"ViewDataApp",lastCreatedTable:void 0},a.parentSetLastCreatedTable=function(e){a.setState({lastCreatedTable:e})},a.parentSetClickedTable=function(e){a.setState({currentTableName:e})},a.parentSetClickedApp=function(e){a.setState({currentApp:e})},a.renderApp=function(){var e=a.state.currentApp,t=a.state.currentTableName;return"AddDataApp"==e&&void 0!=t?r.a.createElement(S,{tableName:a.state.currentTableName,d:!0,parentSetClickedApp:a.parentSetClickedApp}):"ViewDataApp"==e&&void 0!=t?r.a.createElement(C,{tableName:a.state.currentTableName,parentSetClickedApp:a.parentSetClickedApp}):"CreateTableApp"==e?r.a.createElement(v,{parentSetClickedApp:a.parentSetClickedApp,parentSetClickedTable:a.parentSetClickedTable,parentSetLastCreatedTable:a.parentSetLastCreatedTable}):(console.log("Unknown App or Undefined: ",a.state.currentApp),r.a.createElement("div",{id:"page-content"},r.a.createElement("div",{className:"container text-center"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-7"},r.a.createElement("h1",{className:"font-weight-light mt-4 text-black"},"Welcome to DataExchange"),r.a.createElement("p",{className:"lead text-black-50"},"On the left side you can see all your tables and a\xa0button for creating a\xa0new one!"))))))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement(A,{parentGetClickedTable:this.parentSetClickedTable,parentSetClickedApp:this.parentSetClickedApp,lastCreatedTable:this.state.lastCreatedTable}),this.renderApp(),r.a.createElement(N,null))}}]),t}(n.Component);c.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){}},[[12,1,2]]]);
//# sourceMappingURL=main.97af95fc.chunk.js.map